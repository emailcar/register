<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base href="<?php echo $system_url?>" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<!-- Template stylesheet -->
<link href="templates/css/screen.css" rel="stylesheet" type="text/css" media="all">
<link href="templates/css/datepicker.css" rel="stylesheet" type="text/css" media="all">
<link href="templates/css/tipsy.css" rel="stylesheet" type="text/css" media="all">
<link href="templates/js/visualize/visualize.css" rel="stylesheet" type="text/css" media="all">
<link href="templates/js/jwysiwyg/jquery.wysiwyg.css" rel="stylesheet" type="text/css" media="all">
<link href="templates/js/fancybox/jquery.fancybox-1.3.0.css" rel="stylesheet" type="text/css" media="all">
<!--[if IE]>
	<link href="templates/css/ie.css" rel="stylesheet" type="text/css" media="all">
	<script type="text/javascript" src="templates/js/excanvas.js"></script>
<![endif]-->
<!-- Jquery and plugins -->
<script type="text/javascript" src="templates/js/jquery.js"></script>
<script type="text/javascript" src="templates/js/jquery-ui.js"></script>
<script type="text/javascript" src="templates/js/jquery.img.preload.js"></script>
<script type="text/javascript" src="templates/js/hint.js"></script>
<script type="text/javascript" src="templates/js/visualize/jquery.visualize.js"></script>
<script type="text/javascript" src="templates/js/jwysiwyg/jquery.wysiwyg.js"></script>
<script type="text/javascript" src="templates/js/fancybox/jquery.fancybox-1.3.0.js"></script>
<script type="text/javascript" src="templates/js/jquery.tipsy.js"></script>
<script type="text/javascript" src="templates/js/custom_blue.js"></script>
<script type="text/javascript" src="templates/js/dialog.js"></script>
<style type="text/css">
	#tips{
		padding:0;
		margin:0;
		padding-left:32px;
		color:red;
		line-height:32px;
		height:32px;
		display:block;
		font-size:15px;
		background:url("templates/images/022.gif") no-repeat;
	}
	#floatBoxBg{width:100%;height:100%;background:#000;filter:alpha(opacity=50);opacity:0.5;position:absolute;top:0;left:0;}
	.floatBox{border:#666 5px solid;width:500px;position:absolute;top:100px;left:40%;}
	.floatBox .title{height:23px;padding:7px 10px 0;background:#333;color:#fff;}
	.floatBox .title h4{float:left;padding:0;margin:0;font-size:14px;line-height:16px;}
	.floatBox .title span{float:right;cursor:pointer;}
	.floatBox .content{padding:20px 15px;background:#fff;}
	#floatBoxBg{top:100px}
</style>
</head>

<body style="margin:0px; padding:0px; width:99%;">

<div class="onecolumn">
	<div class="header"><span>
	</span> </div>
	<br class="clear"/>
	<div class="content">
		<h3>邮件服务器详情</h3>
		<br/><hr />
		<form action="email_config.php" method="post">
		<input type="hidden" value="<?php echo isset($temp_id) ? $temp_id : 0?>" name="id"/>
		<table width="100%" style="font-weight:bold">
		<tr height="25">
			<th scope="row" align="right" width="250">默认：</th>
			<td><input type="radio" name="is_default" value="1"/>否&nbsp;&nbsp;<input type="radio" name="is_default" value="2"/>是</td>
		</tr>
		<tr height="25">
			<th scope="row" align="right" width="250">邮件服务：</th>			
			<td>		
			<input type="radio" name="is_smtp" value="1" />采用服务器内置的 Mail 服务&nbsp;&nbsp;<input type="radio" name="is_smtp" value="2" />采用其他的 SMTP 服务 </td>
		</tr>
		<tr height="25">
			<th scope="row" align="right" width="250">邮件服务器是否要求加密连接(SSL)：</th>
			<td><input type="radio" name="is_ssl" value="1"/>否&nbsp;&nbsp;<input type="radio" name="is_ssl" value="2"/>是</td>
		</tr>
		<tr height="25">
			<th scope="row" align="right" width="250">发送邮件服务器地址(SMTP)：</th>				
			<td><input type="text" name="host" value="<?php echo isset($smtp['host'])?$smtp['host']:''?>" style="width:300px" /></td>
		</tr>
		<tr height="25">
			<th scope="row" align="right" width="250">服务器端口：</th>
			<td>
			<input type="text" name="port"  value="<?php echo isset($smtp['port'])?$smtp['port']:''?>" />
			</td>
		</tr>
		<tr height="25">
			<th scope="row" align="right" width="250">邮件发送帐号：</th>
			<td>
				<input type="text" name="username"  value="<?php echo isset($smtp['username'])?$smtp['username']:''?>" style="width:300px" />
			</td>
		</tr>
		<tr height="25">
			<th scope="row" align="right" width="250">帐号密码：</th>
			<td>
				<input type="text" name="password"  value="<?php echo isset($smtp['password'])?$smtp['password']:''?>"/>
			</td>
		</tr>
		<tr>
			<th scope="row" align="right" width="250">输入测试邮箱：</th>
			<td>
			<input type="text" name="testEmail" id="test"  /><input type="button" value="测试" id="testEmail"/>
			</td>
		</tr>
		<tr>
			<th scope="row" align="right" width="250"></th>
			<td>
			
			<span style="color:red;">如果您的服务器支持 Mail 函数（具体信息请咨询您的空间提供商）,可以使用Mail函数。我们建议您使用SMTP 作为邮件服务器。保存之后再测试！！
			</span>
			</td>
		</tr>
				
		<tr height="25">
			<td colspan="2" style="text-align:center;">
				<input type="hidden" name="flag" value="<?php echo $flag ?>" />
				<input type="hidden" name="act" value="<?php echo $act ?>" />
				<input type="submit" value="确定" id="subOK"/>
			</td>
		</tr>
		<tr>
			<th scope="row" align="right" width="250"></th>
			<td>
			
			<span style="color:red;"><?php echo isset($_REQUEST['tips']) ? $_REQUEST['tips'] : ''?>
			</span>
			</td>
		</tr>
		</table>
		</form>
</div>
<script type="text/javascript">

$(function(){
//为指定name的radio设置选中值
var param1=<?php echo isset($smtp['is_smtp'])?$smtp['is_smtp']:'1'?>;
var param2=<?php echo isset($smtp['is_ssl'])?$smtp['is_ssl']:'1'?>;
var param3=<?php echo isset($smtp['is_default'])?$smtp['is_default']:'1'?>;
$(":radio[name=is_smtp][value="+param1+"]").attr("checked","true");//指定value的选项为选中项
$(":radio[name=is_ssl][value="+param2+"]").attr("checked","true");
$(":radio[name=is_default][value="+param3+"]").attr("checked","true");
$('#testEmail').click(function(){
	if($.trim($('#test').val()).length < 3)
	{
		alert("请输入测试接收邮箱");
	}else
	{
		$('#testEmail').attr('disabled',"true");
		dialog("系统提示","text:<span id='tips'>邮件测试发送中！！</span>","400px","auto","text");
		$.post("email_config.php", { Action: "post",act:"test_email",email:$('#test').val()},
			function (data){
				$('#testEmail').removeAttr("disabled");
				$('#tips').html(data);
				$('#tips').css("background","url('templates/images/success.jpg') no-repeat");
		});
	}
});
});
</script>
</body>
</html>
